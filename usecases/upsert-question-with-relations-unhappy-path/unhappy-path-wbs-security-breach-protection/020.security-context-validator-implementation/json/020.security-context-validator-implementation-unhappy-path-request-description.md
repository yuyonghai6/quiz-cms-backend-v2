# Security Context Validator Unhappy Path Test Scenario

## Attack Scenario Description
This test scenario simulates a **Path Parameter Manipulation Attack** where a malicious user attempts to access another user's question bank by modifying the URL parameters while using their own valid JWT token.

**Attack Details:**
- **Attacker**: User with ID 1002 (has valid JWT token)
- **Target**: Attempting to access User ID 1001's question bank
- **Method**: Path parameter manipulation in URL
- **Expected Outcome**: Request should be immediately blocked with security violation logged

## Security Validation Expected Behavior
1. **JWT Token Extraction**: System extracts user ID 1002 from valid JWT token
2. **Path Parameter Comparison**: System detects mismatch between token user ID (1002) and URL path user ID (1001)
3. **Security Violation**: Immediate access denial with comprehensive audit logging
4. **Response**: 403 Forbidden with minimal information disclosure

## Test Request Details

HTTP POST request from frontend as:
```
POST /api/users/1001/questionbanks/2001/questions
Authorization: Bearer [JWT_TOKEN_FOR_USER_1002]
Content-Type: application/json
```

POST body is: `020.security-context-validator-implementation-unhappy-path-request.json`

## Expected Security Response
```json
{
  "status": "error",
  "error_code": "UNAUTHORIZED_ACCESS",
  "message": "Access denied",
  "timestamp": "2025-09-27T10:30:00Z",
  "request_id": "req_security_violation_123"
}
```

## Security Event Logging Expected
- **Event Type**: PATH_PARAMETER_MANIPULATION
- **Severity**: HIGH
- **User Context**: Token user 1002 attempted access to user 1001 resources
- **Request Details**: Full request context for forensic analysis
- **Defensive Action**: Request blocked, potential rate limiting applied

## Compliance Requirements
This test validates compliance with:
- **Zero Trust Security**: Every request validated regardless of authentication
- **Defense in Depth**: Multiple validation layers
- **Audit Requirements**: Complete security event trail
- **Privacy Protection**: Minimal error information disclosure