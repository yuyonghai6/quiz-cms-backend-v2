# WBS 1007: Command Handler

## User Story
**As a** CQRS mediator
**I want** a command handler for OnNewUserCreateDefaultQuestionBankCommand
**So that** commands are routed to the application service

---

## Acceptance Criteria
- [ ] Implements ICommandHandler<Command, ResponseDto>
- [ ] Auto-registered with mediator (@Service)
- [ ] Delegates to application service
- [ ] Returns Result<DefaultQuestionBankResponseDto>
- [ ] No business logic (pure delegation)

---

## TDD Cycle

### Epic and Story Annotation
```java
@Epic("Use Case On New User Create Default Question Bank Happy Path")
@Story("1007.command-handler")
```

### Test Coverage Requirements
- **Unit Tests**: 100% coverage (mocked service)
- **Test Count**: 6-8 tests

---

## Implementation Summary

### File: `OnNewUserCreateDefaultQuestionBankCommandHandler.java`
**Location**: `internal-layer/question-bank/src/main/java/com/quizfun/questionbank/application/handlers/`

```java
@Service
public class OnNewUserCreateDefaultQuestionBankCommandHandler 
        implements ICommandHandler<OnNewUserCreateDefaultQuestionBankCommand, 
                                   DefaultQuestionBankResponseDto> {
    
    private final DefaultQuestionBankApplicationService applicationService;
    
    public OnNewUserCreateDefaultQuestionBankCommandHandler(
            DefaultQuestionBankApplicationService applicationService) {
        this.applicationService = applicationService;
    }
    
    @Override
    public Result<DefaultQuestionBankResponseDto> handle(
            OnNewUserCreateDefaultQuestionBankCommand command) {
        
        return applicationService.createDefaultQuestionBank(
            command.getUserId(),
            command.getUserEmail(),
            command.getMetadata()
        );
    }
}
```

### Key Test Cases
1. Should handle command successfully
2. Should delegate to application service
3. Should pass userId to service
4. Should pass userEmail to service
5. Should pass metadata to service
6. Should return service result
7. Should propagate service failure
8. Should handle null command gracefully

---

## Definition of Done
- [x] Handler implements ICommandHandler
- [x] Handler registered with @Service
- [x] 100% test coverage
- [x] Pure delegation (no business logic)
- [x] All tests passing
- [x] Proper Allure annotations

---

## Dependencies
- **WBS 1001**: Command class
- **WBS 1006**: Application service
- **Global**: Mediator pattern

---

## Estimated Effort
**2-3 hours** (0.5 day)
